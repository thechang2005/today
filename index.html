<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Life Stats Dashboard</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Í∏∞Î≥∏ Î¨¥Î£å API ÌÇ§ (Ï†úÌïúÏ†ÅÏù¥ÏßÄÎßå ÌÖåÏä§Ìä∏Ïö©)
        const DEFAULT_API_KEY = '895284fb2d2c50a520ea537456963d9c';

        // Î≤àÏó≠
        const translations = {
            ko: {
                title: "Life Stats Dashboard",
                subtitle: "ÎãπÏã†Ïùò Ïù∏ÏÉù, Ïà´ÏûêÎ°ú ÌôïÏù∏ÌïòÍ∏∞",
                welcome: "ÌôòÏòÅÌï©ÎãàÎã§!",
                name: "Ïù¥Î¶Ñ",
                birthday: "ÏÉùÎÖÑÏõîÏùº",
                start: "ÏãúÏûëÌïòÍ∏∞",
                greeting: "Îãò, ÏïàÎÖïÌïòÏÑ∏Ïöî!",
                changeInfo: "Ï†ïÎ≥¥ Î≥ÄÍ≤ΩÌïòÍ∏∞",
                daysLived: "ÏÇ¥ÏïÑÏò® ÎÇ†",
                thisYear: "Ïò¨Ìï¥",
                sundays: "ÏßÄÎÇòÏò® ÏùºÏöîÏùº",
                sundaysSubtitle: "Ìú¥ÏãùÏùò ÎÇ†Îì§",
                hoursLived: "ÏÇ¥ÏïÑÏò® ÏãúÍ∞Ñ",
                heartbeats: "Ïã¨Ïû• Î∞ïÎèô",
                heartbeatsSubtitle: "Í≥ÑÏÜç Îõ∞Í≥† ÏûàÏäµÎãàÎã§",
                breaths: "Ïà®Ïâ∞ ÌöüÏàò",
                breathsSubtitle: "ÏÉùÎ™ÖÏùò Ïà®Í≤∞",
                nextBirthday: "Îã§Ïùå ÏÉùÏùºÍπåÏßÄ",
                daysRemaining: "Ïùº ÎÇ®ÏïòÏäµÎãàÎã§",
                funStats: "Ïû¨ÎØ∏ÏûàÎäî ÌÜµÍ≥ÑÎì§",
                weeks: "Ï£º",
                months: "Í∞úÏõî",
                sleepHours: "ÏàòÎ©¥ ÏãúÍ∞Ñ",
                meals: "Î®πÏùÄ ÏãùÏÇ¨",
                realtimeCounter: "Ïã§ÏãúÍ∞Ñ Ïπ¥Ïö¥ÌÑ∞",
                seconds: "Ï¥à",
                minutes: "Î∂Ñ",
                hours: "ÏãúÍ∞Ñ",
                days: "Ïùº",
                age: "ÏÑ∏",
                yearProgress: "Ïùº Ï§ë",
                Î≤àÏß∏ÎÇ†: "Î≤àÏß∏ ÎÇ†",
                daysLeft: "Ïùº ÎÇ®Ïùå",
                searchPlaceholder: "Í≤ÄÏÉâ...",
                bookmarks: "Î∂ÅÎßàÌÅ¨",
                weatherAndTime: "ÎÇ†Ïî® & ÏãúÍ∞Ñ",
                addCity: "ÎèÑÏãú Ï∂îÍ∞Ä",
                cityName: "ÎèÑÏãú Ïù¥Î¶Ñ (ÏòÅÏñ¥, Ïòà: Seoul, New York, London)",
                add: "Ï∂îÍ∞Ä",
                cancel: "Ï∑®ÏÜå",
                enterNamePlaceholder: "Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî",
                loading: "Î∂àÎü¨Ïò§Îäî Ï§ë...",
                quotes: [
                    "Ïò§ÎäòÎèÑ ÏÉàÎ°úÏö¥ ÌïòÎ£®ÏûÖÎãàÎã§. ÏµúÏÑ†ÏùÑ Îã§ÌïòÏÑ∏Ïöî!",
                    "Îß§ ÏàúÍ∞ÑÏù¥ ÏÜåÏ§ëÌï©ÎãàÎã§. ÏßÄÍ∏à Ïù¥ ÏàúÍ∞ÑÏóê ÏßëÏ§ëÌïòÏÑ∏Ïöî.",
                    "ÎãπÏã†Ïùò ÏãúÍ∞ÑÏùÄ ÌïúÏ†ïÎêòÏñ¥ ÏûàÏäµÎãàÎã§. Í∞ÄÏπòÏûàÍ≤å Î≥¥ÎÇ¥ÏÑ∏Ïöî.",
                    "Îß§ÏùºÏù¥ ÏÉàÎ°úÏö¥ Í∏∞ÌöåÏûÖÎãàÎã§. ÎèÑÏ†ÑÌïòÏÑ∏Ïöî!",
                    "ÏãúÍ∞ÑÏùÄ Í∏àÏûÖÎãàÎã§. Ïò§ÎäòÏùÑ ÏµúÎåÄÌïú ÌôúÏö©ÌïòÏÑ∏Ïöî!"
                ]
            },
            en: {
                title: "Life Stats Dashboard",
                subtitle: "Your Life, By The Numbers",
                welcome: "Welcome!",
                name: "Name",
                birthday: "Birthday",
                start: "Start",
                greeting: ", Hello!",
                changeInfo: "Change Info",
                daysLived: "Days Lived",
                thisYear: "This Year",
                sundays: "Sundays Passed",
                sundaysSubtitle: "Days of rest",
                hoursLived: "Hours Lived",
                heartbeats: "Heartbeats",
                heartbeatsSubtitle: "Still beating",
                breaths: "Breaths Taken",
                breathsSubtitle: "Breath of life",
                nextBirthday: "Next Birthday",
                daysRemaining: "days remaining",
                funStats: "Fun Statistics",
                weeks: "Weeks",
                months: "Months",
                sleepHours: "Sleep Hours",
                meals: "Meals Eaten",
                realtimeCounter: "Real-time Counter",
                seconds: "Seconds",
                minutes: "Minutes",
                hours: "Hours",
                days: "Days",
                age: "years old",
                yearProgress: "of",
                Î≤àÏß∏ÎÇ†: "th day",
                daysLeft: "remaining",
                searchPlaceholder: "Search...",
                bookmarks: "Bookmarks",
                weatherAndTime: "Weather & Time",
                addCity: "Add City",
                cityName: "City Name (in English, e.g., Seoul, New York, London)",
                add: "Add",
                cancel: "Cancel",
                enterNamePlaceholder: "Enter your name",
                loading: "Loading...",
                quotes: [
                    "Today is a new day. Do your best!",
                    "Every moment is precious. Focus on this moment.",
                    "Your time is limited. Spend it wisely.",
                    "Every day is a new opportunity. Challenge yourself!",
                    "Time is gold. Make the most of today!"
                ]
            }
        };

        // ÏïÑÏù¥ÏΩòÎì§
        const Calendar = ({ className }) => (<svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" strokeWidth="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>);
        const Clock = ({ className }) => (<svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" strokeWidth="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>);
        const Heart = ({ className }) => (<svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" strokeWidth="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>);
        const Sun = ({ className }) => (<svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" strokeWidth="2"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>);
        const Award = ({ className }) => (<svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" strokeWidth="2"><circle cx="12" cy="8" r="7"/><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/></svg>);
        const TrendingUp = ({ className }) => (<svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" strokeWidth="2"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/></svg>);
        const Globe = ({ className }) => (<svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" strokeWidth="2"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>);
        const Search = ({ className }) => (<svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" strokeWidth="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>);
        const Bookmark = ({ className }) => (<svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" strokeWidth="2"><path d="m19 21-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"/></svg>);
        const Plus = ({ className }) => (<svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" strokeWidth="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>);
        const X = ({ className }) => (<svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" strokeWidth="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>);

        function countSundays(birthDate, now) {
            const birth = new Date(birthDate);
            const daysDiff = Math.floor((now - birth) / (1000 * 60 * 60 * 24));
            const weeksDiff = Math.floor(daysDiff / 7);
            const birthDayOfWeek = birth.getDay();
            let sundays = weeksDiff;
            if (birthDayOfWeek === 0) sundays++;
            return sundays;
        }

        function LifeStats() {
            const [lang, setLang] = useState('ko');
            const [birthday, setBirthday] = useState('');
            const [name, setName] = useState('');
            const [stats, setStats] = useState(null);
            const [currentTime, setCurrentTime] = useState(new Date());
            const [searchQuery, setSearchQuery] = useState('');
            const [searchEngine, setSearchEngine] = useState('google');
            const [bookmarks, setBookmarks] = useState([]);
            const [showBookmarkForm, setShowBookmarkForm] = useState(false);
            const [newBookmark, setNewBookmark] = useState({ name: '', url: '' });
            const [cities, setCities] = useState([]);
            const [cityData, setCityData] = useState({});
            const [showCityForm, setShowCityForm] = useState(false);
            const [newCity, setNewCity] = useState('');

            const t = translations[lang];

            // ÎÇ†Ïî® Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞
            const fetchCityData = async (cityName, cityId) => {
                try {
                    const response = await fetch(
                        `https://api.openweathermap.org/data/2.5/weather?q=${encodeURIComponent(cityName)}&appid=${DEFAULT_API_KEY}&units=metric`
                    );
                    if (response.ok) {
                        const data = await response.json();
                        setCityData(prev => ({
                            ...prev,
                            [cityId]: {
                                temp: data.main.temp,
                                weather: data.weather[0].main,
                                description: data.weather[0].description,
                                icon: data.weather[0].icon,
                                timezone: data.timezone,
                                name: data.name
                            }
                        }));
                    }
                } catch (error) {
                    console.error('Error fetching weather:', error);
                }
            };

            // ÎèÑÏãúÏùò Î°úÏª¨ ÏãúÍ∞Ñ Í≥ÑÏÇ∞
            const getCityLocalTime = (timezoneOffset) => {
                if (!timezoneOffset) return '';
                const utc = currentTime.getTime() + (currentTime.getTimezoneOffset() * 60000);
                const cityTime = new Date(utc + (timezoneOffset * 1000));
                return cityTime.toLocaleString(lang === 'ko' ? 'ko-KR' : 'en-US', {
                    month: 'short',
                    day: 'numeric',
                    weekday: 'short',
                    hour: '2-digit',
                    minute: '2-digit',
                    hour12: true
                });
            };

            // Ïò®ÎèÑ Î≥ÄÌôò
            const formatTemp = (celsius) => {
                const fahrenheit = Math.round(celsius * 9/5 + 32);
                return `${Math.round(celsius)}¬∞C / ${fahrenheit}¬∞F`;
            };

            // ÎÇ†Ïî® Ïù¥Î™®ÏßÄ
            const getWeatherEmoji = (weather) => {
                const map = {
                    'Clear': '‚òÄÔ∏è',
                    'Clouds': '‚òÅÔ∏è',
                    'Rain': 'üåßÔ∏è',
                    'Drizzle': 'üå¶Ô∏è',
                    'Thunderstorm': '‚õàÔ∏è',
                    'Snow': '‚ùÑÔ∏è',
                    'Mist': 'üå´Ô∏è',
                    'Fog': 'üå´Ô∏è',
                    'Haze': 'üå´Ô∏è'
                };
                return map[weather] || 'üå§Ô∏è';
            };

            // 1Ï¥àÎßàÎã§ ÏóÖÎç∞Ïù¥Ìä∏
            useEffect(() => {
                const timer = setInterval(() => setCurrentTime(new Date()), 1000);
                return () => clearInterval(timer);
            }, []);

            // ÎèÑÏãú ÎÇ†Ïî® Ï£ºÍ∏∞Ï†Å ÏóÖÎç∞Ïù¥Ìä∏
            useEffect(() => {
                if (cities.length > 0) {
                    cities.forEach(city => fetchCityData(city.name, city.id));
                    const interval = setInterval(() => {
                        cities.forEach(city => fetchCityData(city.name, city.id));
                    }, 600000); // 10Î∂ÑÎßàÎã§
                    return () => clearInterval(interval);
                }
            }, [cities]);

            // stats Ïã§ÏãúÍ∞Ñ ÏóÖÎç∞Ïù¥Ìä∏
            useEffect(() => {
                if (birthday) {
                    const birth = new Date(birthday);
                    const now = currentTime;
                    const totalMs = now - birth;
                    const totalSeconds = Math.floor(totalMs / 1000);
                    const totalMinutes = Math.floor(totalSeconds / 60);
                    const totalHours = Math.floor(totalMinutes / 60);
                    const totalDays = Math.floor(totalHours / 24);
                    
                    const startOfYear = new Date(now.getFullYear(), 0, 1);
                    const dayOfYear = Math.floor((now - startOfYear) / (1000 * 60 * 60 * 24)) + 1;
                    const endOfYear = new Date(now.getFullYear(), 11, 31);
                    const daysLeftInYear = Math.floor((endOfYear - now) / (1000 * 60 * 60 * 24));
                    
                    if (stats) {
                        setStats(prev => ({
                            ...prev,
                            totalSeconds, totalMinutes, totalHours, totalDays,
                            dayOfYear, daysLeftInYear
                        }));
                    }
                }
            }, [currentTime, birthday]);

            // Ï¥àÍ∏∞ Î°úÎî©
            useEffect(() => {
                const savedBirthday = localStorage.getItem('userBirthday');
                const savedName = localStorage.getItem('userName');
                const savedLang = localStorage.getItem('userLang') || 'ko';
                const savedBookmarks = JSON.parse(localStorage.getItem('userBookmarks') || '[]');
                const savedCities = JSON.parse(localStorage.getItem('userCities') || '[]');
                const savedSearchEngine = localStorage.getItem('searchEngine') || 'google';

                setLang(savedLang);
                setBookmarks(savedBookmarks);
                setCities(savedCities);
                setSearchEngine(savedSearchEngine);

                if (savedBirthday && savedName) {
                    setBirthday(savedBirthday);
                    setName(savedName);
                    
                    const birth = new Date(savedBirthday);
                    const now = new Date();
                    const totalMs = now - birth;
                    const totalSeconds = Math.floor(totalMs / 1000);
                    const totalMinutes = Math.floor(totalSeconds / 60);
                    const totalHours = Math.floor(totalMinutes / 60);
                    const totalDays = Math.floor(totalHours / 24);
                    const totalWeeks = Math.floor(totalDays / 7);
                    const totalMonths = Math.floor(totalDays / 30.44);
                    
                    let age = now.getFullYear() - birth.getFullYear();
                    const monthDiff = now.getMonth() - birth.getMonth();
                    if (monthDiff < 0 || (monthDiff === 0 && now.getDate() < birth.getDate())) age--;
                    
                    const sundays = countSundays(savedBirthday, now);
                    
                    const nextBirthday = new Date(now.getFullYear(), birth.getMonth(), birth.getDate());
                    if (nextBirthday < now) nextBirthday.setFullYear(now.getFullYear() + 1);
                    const daysToNextBirthday = Math.ceil((nextBirthday - now) / (1000 * 60 * 60 * 24));
                    
                    const heartbeats = Math.floor(totalMinutes * 75);
                    const breaths = Math.floor(totalMinutes * 16);
                    const sleepHours = Math.floor(totalHours * 0.33);
                    const meals = Math.floor(totalDays * 3);
                    
                    const startOfYear = new Date(now.getFullYear(), 0, 1);
                    const dayOfYear = Math.floor((now - startOfYear) / (1000 * 60 * 60 * 24)) + 1;
                    const endOfYear = new Date(now.getFullYear(), 11, 31);
                    const daysLeftInYear = Math.floor((endOfYear - now) / (1000 * 60 * 60 * 24));
                    const isLeapYear = (now.getFullYear() % 4 === 0 && now.getFullYear() % 100 !== 0) || (now.getFullYear() % 400 === 0);
                    const totalDaysInYear = isLeapYear ? 366 : 365;
                    
                    setStats({
                        totalDays, totalHours, totalMinutes, totalSeconds, totalWeeks, totalMonths,
                        age, sundays, daysToNextBirthday, heartbeats, breaths, sleepHours, meals,
                        dayOfYear, daysLeftInYear, totalDaysInYear
                    });
                }
            }, []);

            const handleSubmit = (e) => {
                e.preventDefault();
                if (birthday && name) {
                    localStorage.setItem('userBirthday', birthday);
                    localStorage.setItem('userName', name);
                    
                    const birth = new Date(birthday);
                    const now = new Date();
                    const totalMs = now - birth;
                    const totalSeconds = Math.floor(totalMs / 1000);
                    const totalMinutes = Math.floor(totalSeconds / 60);
                    const totalHours = Math.floor(totalMinutes / 60);
                    const totalDays = Math.floor(totalHours / 24);
                    const totalWeeks = Math.floor(totalDays / 7);
                    const totalMonths = Math.floor(totalDays / 30.44);
                    
                    let age = now.getFullYear() - birth.getFullYear();
                    const monthDiff = now.getMonth() - birth.getMonth();
                    if (monthDiff < 0 || (monthDiff === 0 && now.getDate() < birth.getDate())) age--;
                    
                    const sundays = countSundays(birthday, now);
                    
                    const nextBirthday = new Date(now.getFullYear(), birth.getMonth(), birth.getDate());
                    if (nextBirthday < now) nextBirthday.setFullYear(now.getFullYear() + 1);
                    const daysToNextBirthday = Math.ceil((nextBirthday - now) / (1000 * 60 * 60 * 24));
                    
                    const heartbeats = Math.floor(totalMinutes * 75);
                    const breaths = Math.floor(totalMinutes * 16);
                    const sleepHours = Math.floor(totalHours * 0.33);
                    const meals = Math.floor(totalDays * 3);
                    
                    const startOfYear = new Date(now.getFullYear(), 0, 1);
                    const dayOfYear = Math.floor((now - startOfYear) / (1000 * 60 * 60 * 24)) + 1;
                    const endOfYear = new Date(now.getFullYear(), 11, 31);
                    const daysLeftInYear = Math.floor((endOfYear - now) / (1000 * 60 * 60 * 24));
                    const isLeapYear = (now.getFullYear() % 4 === 0 && now.getFullYear() % 100 !== 0) || (now.getFullYear() % 400 === 0);
                    const totalDaysInYear = isLeapYear ? 366 : 365;
                    
                    setStats({
                        totalDays, totalHours, totalMinutes, totalSeconds, totalWeeks, totalMonths,
                        age, sundays, daysToNextBirthday, heartbeats, breaths, sleepHours, meals,
                        dayOfYear, daysLeftInYear, totalDaysInYear
                    });
                }
            };

            const toggleLanguage = () => {
                const newLang = lang === 'ko' ? 'en' : 'ko';
                setLang(newLang);
                localStorage.setItem('userLang', newLang);
            };

            const handleSearch = (e) => {
                e.preventDefault();
                if (!searchQuery.trim()) return;
                const engines = {
                    google: `https://www.google.com/search?q=${encodeURIComponent(searchQuery)}`,
                    wikipedia: `https://en.wikipedia.org/wiki/Special:Search?search=${encodeURIComponent(searchQuery)}`,
                    youtube: `https://www.youtube.com/results?search_query=${encodeURIComponent(searchQuery)}`,
                    github: `https://github.com/search?q=${encodeURIComponent(searchQuery)}`
                };
                window.open(engines[searchEngine] || engines.google, '_blank');
                setSearchQuery('');
            };

            const addBookmark = () => {
                if (bookmarks.length >= 10) {
                    alert(lang === 'ko' ? 'ÏµúÎåÄ 10Í∞úÍπåÏßÄÎßå Ï∂îÍ∞ÄÌï† Ïàò ÏûàÏäµÎãàÎã§' : 'Maximum 10 bookmarks allowed');
                    return;
                }
                if (!newBookmark.name || !newBookmark.url) return;
                let url = newBookmark.url.trim();
                if (!url.startsWith('http://') && !url.startsWith('https://')) url = 'https://' + url;
                const updated = [...bookmarks, { name: newBookmark.name, url, id: Date.now() }];
                setBookmarks(updated);
                localStorage.setItem('userBookmarks', JSON.stringify(updated));
                setNewBookmark({ name: '', url: '' });
                setShowBookmarkForm(false);
            };

            const deleteBookmark = (id) => {
                const updated = bookmarks.filter(b => b.id !== id);
                setBookmarks(updated);
                localStorage.setItem('userBookmarks', JSON.stringify(updated));
            };

            const addCity = () => {
                if (cities.length >= 10) {
                    alert(lang === 'ko' ? 'ÏµúÎåÄ 10Í∞úÍπåÏßÄÎßå Ï∂îÍ∞ÄÌï† Ïàò ÏûàÏäµÎãàÎã§' : 'Maximum 10 cities allowed');
                    return;
                }
                if (!newCity.trim()) return;
                const cityObj = { name: newCity.trim(), id: Date.now() };
                const updated = [...cities, cityObj];
                setCities(updated);
                localStorage.setItem('userCities', JSON.stringify(updated));
                fetchCityData(cityObj.name, cityObj.id);
                setNewCity('');
                setShowCityForm(false);
            };

            const deleteCity = (id) => {
                const updated = cities.filter(c => c.id !== id);
                setCities(updated);
                localStorage.setItem('userCities', JSON.stringify(updated));
                setCityData(prev => {
                    const newData = {...prev};
                    delete newData[id];
                    return newData;
                });
            };

            const StatCard = ({ icon: Icon, label, value, subtitle, color }) => (
                <div className={`bg-gradient-to-br ${color} p-6 rounded-xl shadow-lg transform hover:scale-105 transition-transform duration-200`}>
                    <div className="flex items-center gap-3 mb-2">
                        <Icon className="w-6 h-6 text-white" />
                        <h3 className="text-white font-semibold text-sm uppercase tracking-wide">{label}</h3>
                    </div>
                    <p className="text-3xl font-bold text-white mb-1">{value.toLocaleString()}</p>
                    {subtitle && <p className="text-white text-sm opacity-90">{subtitle}</p>}
                </div>
            );

            const getMotivationalQuote = () => t.quotes[Math.floor(Math.random() * t.quotes.length)];

            if (!stats) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 p-4">
                        <div className="max-w-6xl mx-auto">
                            <div className="flex justify-between items-center mb-4 pt-4">
                                <div></div>
                                <button onClick={toggleLanguage} className="bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg backdrop-blur-sm transition-colors">
                                    {lang === 'ko' ? 'üá∫üá∏ English' : 'üá∞üá∑ ÌïúÍµ≠Ïñ¥'}
                                </button>
                            </div>
                            <div className="text-center mb-8">
                                <h1 className="text-5xl font-bold text-white mb-3 drop-shadow-lg">‚è∞ {t.title}</h1>
                                <p className="text-xl text-white opacity-90">{t.subtitle}</p>
                            </div>
                            <div className="max-w-md mx-auto bg-white rounded-2xl shadow-2xl p-8 mb-8">
                                <h2 className="text-2xl font-bold text-gray-800 mb-6 text-center">{t.welcome} üëã</h2>
                                <form onSubmit={handleSubmit} className="space-y-4">
                                    <div>
                                        <label className="block text-gray-700 font-semibold mb-2">{t.name}</label>
                                        <input type="text" value={name} onChange={(e) => setName(e.target.value)}
                                            placeholder={t.enterNamePlaceholder}
                                            className="w-full p-4 border-2 border-purple-300 rounded-lg text-lg focus:outline-none focus:border-purple-500" required />
                                    </div>
                                    <div>
                                        <label className="block text-gray-700 font-semibold mb-2">{t.birthday}</label>
                                        <input type="date" value={birthday} onChange={(e) => setBirthday(e.target.value)}
                                            className="w-full p-4 border-2 border-purple-300 rounded-lg text-lg focus:outline-none focus:border-purple-500" required />
                                    </div>
                                    <button type="submit"
                                        className="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-4 rounded-lg font-semibold text-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200 shadow-lg">
                                        {t.start}
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 p-4">
                    <div className="max-w-6xl mx-auto">
                        <div className="flex justify-between items-center mb-4 pt-4">
                            <div></div>
                            <button onClick={toggleLanguage} className="bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg backdrop-blur-sm transition-colors">
                                {lang === 'ko' ? 'üá∫üá∏ English' : 'üá∞üá∑ ÌïúÍµ≠Ïñ¥'}
                            </button>
                        </div>

                        <div className="text-center mb-8">
                            <h1 className="text-5xl font-bold text-white mb-3 drop-shadow-lg">‚è∞ {t.title}</h1>
                            <p className="text-xl text-white opacity-90">{t.subtitle}</p>
                        </div>

                        <div className="space-y-6">
                            {/* Í≤ÄÏÉâ Î∞î */}
                            <div className="bg-white rounded-2xl shadow-2xl p-4">
                                <form onSubmit={handleSearch} className="flex gap-2">
                                    <select value={searchEngine} onChange={(e) => { setSearchEngine(e.target.value); localStorage.setItem('searchEngine', e.target.value); }}
                                        className="px-4 py-2 border-2 border-purple-300 rounded-lg focus:outline-none focus:border-purple-500">
                                        <option value="google">Google</option>
                                        <option value="wikipedia">Wikipedia</option>
                                        <option value="youtube">YouTube</option>
                                        <option value="github">GitHub</option>
                                    </select>
                                    <div className="flex-1 relative">
                                        <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400" />
                                        <input type="text" value={searchQuery} onChange={(e) => setSearchQuery(e.target.value)}
                                            placeholder={t.searchPlaceholder}
                                            className="w-full pl-10 pr-4 py-2 border-2 border-purple-300 rounded-lg text-lg focus:outline-none focus:border-purple-500" />
                                    </div>
                                </form>
                            </div>

                            {/* Î∂ÅÎßàÌÅ¨ */}
                            <div className="bg-white rounded-2xl shadow-2xl p-6">
                                <div className="flex justify-between items-center mb-4">
                                    <h2 className="text-2xl font-bold text-gray-800 flex items-center gap-2">
                                        <Bookmark className="w-6 h-6" /> {t.bookmarks}
                                    </h2>
                                    {bookmarks.length < 10 && (
                                        <button onClick={() => setShowBookmarkForm(!showBookmarkForm)}
                                            className="flex items-center gap-1 bg-purple-600 text-white px-3 py-2 rounded-lg hover:bg-purple-700 transition-colors">
                                            <Plus className="w-4 h-4" /> {t.add}
                                        </button>
                                    )}
                                </div>
                                {showBookmarkForm && (
                                    <div className="mb-4 p-4 bg-gray-50 rounded-lg">
                                        <input type="text" placeholder="Name" value={newBookmark.name}
                                            onChange={(e) => setNewBookmark({...newBookmark, name: e.target.value})}
                                            className="w-full mb-2 p-2 border rounded" />
                                        <input type="text" placeholder="URL" value={newBookmark.url}
                                            onChange={(e) => setNewBookmark({...newBookmark, url: e.target.value})}
                                            className="w-full mb-2 p-2 border rounded" />
                                        <div className="flex gap-2">
                                            <button onClick={addBookmark} className="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">{t.add}</button>
                                            <button onClick={() => setShowBookmarkForm(false)} className="bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500">{t.cancel}</button>
                                        </div>
                                    </div>
                                )}
                                <div className="grid grid-cols-2 md:grid-cols-5 gap-2">
                                    {bookmarks.map(b => (
                                        <div key={b.id} className="group relative">
                                            <a href={b.url} target="_blank" rel="noopener noreferrer"
                                                className="block p-3 bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg hover:from-purple-100 hover:to-pink-100 text-center transition-colors">
                                                <p className="font-semibold text-gray-800 truncate">{b.name}</p>
                                            </a>
                                            <button onClick={() => deleteBookmark(b.id)}
                                                className="absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity">
                                                <X className="w-3 h-3" />
                                            </button>
                                        </div>
                                    ))}
                                </div>
                            </div>

                            {/* ÎÇ†Ïî® & ÏãúÍ∞Ñ */}
                            <div className="bg-white rounded-2xl shadow-2xl p-6">
                                <div className="flex justify-between items-center mb-4">
                                    <h2 className="text-2xl font-bold text-gray-800 flex items-center gap-2">
                                        <Globe className="w-6 h-6" /> {t.weatherAndTime}
                                    </h2>
                                    {cities.length < 10 && (
                                        <button onClick={() => setShowCityForm(!showCityForm)}
                                            className="flex items-center gap-1 bg-purple-600 text-white px-3 py-2 rounded-lg hover:bg-purple-700 transition-colors">
                                            <Plus className="w-4 h-4" /> {t.add}
                                        </button>
                                    )}
                                </div>
                                {showCityForm && (
                                    <div className="mb-4 p-4 bg-gray-50 rounded-lg">
                                        <input type="text" placeholder={t.cityName} value={newCity}
                                            onChange={(e) => setNewCity(e.target.value)}
                                            className="w-full mb-2 p-2 border rounded" />
                                        <div className="flex gap-2">
                                            <button onClick={addCity} className="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">{t.add}</button>
                                            <button onClick={() => setShowCityForm(false)} className="bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500">{t.cancel}</button>
                                        </div>
                                    </div>
                                )}
                                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                    {cities.map(city => {
                                        const data = cityData[city.id];
                                        return (
                                            <div key={city.id} className="group relative bg-gradient-to-br from-blue-50 to-cyan-50 p-4 rounded-lg border-2 border-blue-100">
                                                <button onClick={() => deleteCity(city.id)}
                                                    className="absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity z-10">
                                                    <X className="w-3 h-3" />
                                                </button>
                                                {data ? (
                                                    <>
                                                        <div className="flex items-center gap-2 mb-2">
                                                            <span className="text-3xl">{getWeatherEmoji(data.weather)}</span>
                                                            <div>
                                                                <p className="font-bold text-lg text-gray-800">{data.name}</p>
                                                                <p className="text-sm text-gray-600 capitalize">{data.description}</p>
                                                            </div>
                                                        </div>
                                                        <p className="text-2xl font-bold text-blue-600 mb-1">{formatTemp(data.temp)}</p>
                                                        <p className="text-sm text-gray-700 font-medium">{getCityLocalTime(data.timezone)}</p>
                                                    </>
                                                ) : (
                                                    <div className="text-center py-4">
                                                        <p className="text-gray-500">{t.loading}</p>
                                                    </div>
                                                )}
                                            </div>
                                        );
                                    })}
                                </div>
                            </div>

                            {/* Ïù∏ÏÇ¨Îßê */}
                            <div className="bg-white rounded-2xl shadow-2xl p-8 text-center">
                                <h2 className="text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600 mb-4">
                                    {name}{t.greeting} üëã
                                </h2>
                                <p className="text-2xl font-semibold text-gray-700 mb-2">{getMotivationalQuote()}</p>
                                <p className="text-gray-500 mt-4">
                                    {currentTime.toLocaleDateString(lang === 'ko' ? 'ko-KR' : 'en-US', { 
                                        year: 'numeric', month: 'long', day: 'numeric', weekday: 'long'
                                    })}
                                </p>
                                <button onClick={() => {
                                        setStats(null); setBirthday(''); setName('');
                                        localStorage.removeItem('userBirthday'); localStorage.removeItem('userName');
                                    }}
                                    className="mt-4 text-sm text-gray-500 hover:text-gray-700 underline">{t.changeInfo}</button>
                            </div>

                            {/* Î©îÏù∏ ÌÜµÍ≥Ñ */}
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                <StatCard icon={Calendar} label={t.daysLived} value={stats.totalDays}
                                    subtitle={`${stats.age} ${t.age}`} color="from-blue-500 to-blue-600" />
                                <StatCard icon={Calendar} label={t.thisYear} value={stats.dayOfYear}
                                    subtitle={`${stats.totalDaysInYear} ${t.yearProgress} ${stats.dayOfYear}${t.Î≤àÏß∏ÎÇ†} (${stats.daysLeftInYear} ${t.daysLeft})`}
                                    color="from-indigo-500 to-indigo-600" />
                                <StatCard icon={Sun} label={t.sundays} value={stats.sundays}
                                    subtitle={t.sundaysSubtitle} color="from-yellow-500 to-orange-500" />
                                <StatCard icon={Clock} label={t.hoursLived} value={stats.totalHours}
                                    subtitle={`${stats.totalMinutes.toLocaleString()} ${t.minutes}`} color="from-green-500 to-green-600" />
                                <StatCard icon={Heart} label={t.heartbeats} value={stats.heartbeats}
                                    subtitle={t.heartbeatsSubtitle} color="from-red-500 to-pink-500" />
                                <StatCard icon={TrendingUp} label={t.breaths} value={stats.breaths}
                                    subtitle={t.breathsSubtitle} color="from-cyan-500 to-blue-500" />
                                <StatCard icon={Award} label={t.nextBirthday} value={stats.daysToNextBirthday}
                                    subtitle={t.daysRemaining} color="from-purple-500 to-indigo-500" />
                            </div>

                            {/* Ïû¨ÎØ∏ÏûàÎäî ÌÜµÍ≥Ñ */}
                            <div className="bg-white rounded-2xl shadow-2xl p-8">
                                <h2 className="text-2xl font-bold text-gray-800 mb-6 text-center">{t.funStats}</h2>
                                <div className="grid grid-cols-2 md:grid-cols-4 gap-6 text-center">
                                    <div><p className="text-3xl font-bold text-purple-600">{stats.totalWeeks.toLocaleString()}</p>
                                        <p className="text-gray-600 mt-1">{t.weeks}</p></div>
                                    <div><p className="text-3xl font-bold text-pink-600">{stats.totalMonths.toLocaleString()}</p>
                                        <p className="text-gray-600 mt-1">{t.months}</p></div>
                                    <div><p className="text-3xl font-bold text-blue-600">{stats.sleepHours.toLocaleString()}</p>
                                        <p className="text-gray-600 mt-1">{t.sleepHours}</p></div>
                                    <div><p className="text-3xl font-bold text-orange-600">{stats.meals.toLocaleString()}</p>
                                        <p className="text-gray-600 mt-1">{t.meals}</p></div>
                                </div>
                            </div>

                            {/* Ïã§ÏãúÍ∞Ñ Ïπ¥Ïö¥ÌÑ∞ */}
                            <div className="bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl shadow-2xl p-8 text-white">
                                <h2 className="text-2xl font-bold mb-4 text-center">{t.realtimeCounter}</h2>
                                <div className="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                                    <div><p className="text-2xl font-bold">{stats.totalSeconds.toLocaleString()}</p>
                                        <p className="text-sm opacity-90">{t.seconds}</p></div>
                                    <div><p className="text-2xl font-bold">{stats.totalMinutes.toLocaleString()}</p>
                                        <p className="text-sm opacity-90">{t.minutes}</p></div>
                                    <div><p className="text-2xl font-bold">{stats.totalHours.toLocaleString()}</p>
                                        <p className="text-sm opacity-90">{t.hours}</p></div>
                                    <div><p className="text-2xl font-bold">{stats.totalDays.toLocaleString()}</p>
                                        <p className="text-sm opacity-90">{t.days}</p></div>
                                </div>
                            </div>
                        </div>

                        <div className="text-center mt-8 pb-8">
                            <p className="text-white text-sm opacity-75">
                                {currentTime.toLocaleDateString(lang === 'ko' ? 'ko-KR' : 'en-US', { 
                                    year: 'numeric', month: 'long', day: 'numeric', weekday: 'long'
                                })}
                            </p>
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<LifeStats />);
    </script>
</body>
</html>
